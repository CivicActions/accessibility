# Workflows

## pa11y.yml

Tests the site for accessibility issues using pa11y-ci. The results of the tests are added as comment on the pull request.

pa11y-ci is configured with the file [.pa11yci](.pa11yci) and it is setup to use Axe and follow WCAG2 AA standard.

The pa11y-ci commands can also be run locally to generate the same test results:

* `npm run start-detached` this will start the local server in a detached state.
* `npm run pa11y-ci:home` run pa11y-ci against the home page.
* `npm run pa11y-ci:sitemap` run pa11y-ci against all URLs generated by the sitemap except for PDFs.

## reviewdog.yml

Run remark-lint with reviewdog on pull requests to check for readibility and other text checks.

## pre-commit.yml

Run pre-commit hooks to clean up site based on configurations in .pre-commit-config.yaml include searching and replacing smart quotes defined in .pre-commit-search-and-replace.yaml.

# References

* https://github.com/pa11y/pa11y
* https://github.com/pa11y/pa11y-ci
* https://andrewmee.com/posts/automated-accessibility-testing-node-travis-ci-pa11y/
* https://engineering.18f.gov/accessibility-scanning/
* https://medium.com/@f3igao/how-to-automate-web-accessibility-testing-921512bdd4bf
* https://stackoverflow.com/questions/58858429/how-to-run-a-github-actions-step-even-if-the-previous-step-fails-while-still-f
* https://docs.gitlab.com/ee/user/project/merge_requests/accessibility_testing.html
* https://stackoverflow.com/questions/57915432/write-output-of-npm-run-start-to-a-file
* https://github.com/marketplace/actions/comment-pull-request
* https://pre-commit.com/
