# Workflows

## accessibility-alt-text-bot.yml

This action reminds users to add a meaningful alternative text to their images.

## auto-update.yml

Updating branch that is configured to auto-merge.

## cypress.yml

Run Cypress tests with Axe to check accessibility of the site with axe by interacting with the menu, search, and with different screen sizes.

## link-check.yml

This action checks content links for issues using https://github.com/gjtorikian/html-proofer.

## pa11y.yml

Tests the site for accessibility issues using pa11y-ci. The results of the tests are added as comment on the pull request.

pa11y-ci is configured with the file [.pa11yci](.pa11yci) and it is setup to use Axe and follow WCAG2 AA standard.

The pa11y-ci commands can also be run locally to generate the same test results:

* `npm run start-detached` this will start the local server in a detached state.
* `npm run pa11y-ci:home` run pa11y-ci against the home page.
* `npm run pa11y-ci:sitemap` run pa11y-ci against all URLs generated by the sitemap except for PDFs.

## qa.yml

Adding the label 'qa-pull-request' to a pull request will deploy the changes to a [QA site](https://accessibility-qa.civicactions.com/) for review. To reapply the changes remove and readd the label. **Note**: Only one pull request can be viewable on the QA site so use coordinate the deployments.

This pipeline requires a personal access token or organizational one with the key `API_TOKEN_GITHUB`.

## reviewdog.yml

Run remark-lint with reviewdog on pull requests to check for readibility and other text checks.

# References

* https://github.com/pa11y/pa11y
* https://github.com/pa11y/pa11y-ci
* https://andrewmee.com/posts/automated-accessibility-testing-node-travis-ci-pa11y/
* https://engineering.18f.gov/accessibility-scanning/
* https://medium.com/@f3igao/how-to-automate-web-accessibility-testing-921512bdd4bf
* https://stackoverflow.com/questions/58858429/how-to-run-a-github-actions-step-even-if-the-previous-step-fails-while-still-f
* https://stackoverflow.com/questions/57915432/write-output-of-npm-run-start-to-a-file
* https://github.com/marketplace/actions/comment-pull-request
* https://pre-commit.com/
* https://github.blog/2021-04-28-use-github-actions-manage-docs/
* https://stackoverflow.com/questions/62325286/run-github-actions-when-pull-requests-have-a-specific-label
* https://github.com/marketplace/actions/push-directory-to-another-repository
* https://github.com/marketplace/actions/find-and-replace
* https://github.com/gjtorikian/html-proofer
* https://danielsieger.com/blog/2021/03/28/check-broken-links-jekyll.html
